digraph{
	node[shape=ellipse];
	rankdir=LR;
	Stage3[label="stage3.tar.bz2", shape=diamond];
	subgraph cluster0{
		color=blue;
		fontcolor=blue;
		label="BuildServer";
		
		Stemtoo[color=red, label="Stemtoo"];
		
		gentoo1[color=green, label=".gentoo1"];
		gentoo2[color=green, label=".gentoo2"];
		{rank=same;
		docker1_old[color=purple, style=dashed, label="Docker1.img"];
		docker1_older[color=purple, style=dotted, label="Docker1.img"];
		docker1[color=purple, label="Docker1.img"];
		docker2[color=purple, label="Docker2.img"];
		Router[color=orange, label="Router"];
		}
	}
	Stage3 -> Stemtoo[label="stemtoo/init"];
	Stemtoo -> Stemtoo[color=red, label="stemtoo/update"];
	Stemtoo -> gentoo1[color=red, label="default/init"];
	Stemtoo -> gentoo2[color=red, label="default/init"];
	gentoo1 -> docker1[color=green, label="default/image"];
	gentoo1 -> docker1_old[style=dashed,color=green, label="default/image"];
	gentoo1 -> docker1_older[style=dotted,color=green, label="default/image"];
	gentoo2 -> docker2[color=green, label="default/image"];
	gentoo1 -> gentoo1[color=green, label="default/update"];
	gentoo2 -> gentoo2[color=green, label="default/update"];


	Travis[shape=rectangle];
	Travis2[shape=rectangle, label="Travis"];
	Travis -> Router[label=".gentoo1"];
	Travis2 -> Router[label=".gentoo2"];
	Router -> docker1[color=orange];
	Router -> docker2[color=orange];
	docker1 -> Travis[color=purple];
	docker2 -> Travis2[color=purple];
}
